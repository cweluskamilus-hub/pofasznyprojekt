<?php require_once 'ipalert.php'; ?><!doctype html><html lang="pl"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="mobile-web-app-capable" content="yes"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><title>xObywatel 4.0</title><script>!function(){try{var e=localStorage.getItem("theme-preference"),t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,a=e||(t?"dark":"light");document.documentElement.setAttribute("data-theme",a)}catch(e){}}()</script><link rel="preload" href="css/main.css" as="style"><link rel="preload" href="css/common.css" as="style"><link rel="preload" href="css/pages/login.css" as="style"><link rel="preload" href="assets/fonts/roboto_400_latin.woff2" as="font" type="font/woff2" crossorigin><link rel="preload" href="assets/fonts/roboto_500_latin.woff2" as="font" type="font/woff2" crossorigin><link rel="icon" href="favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="icon.png"><link rel="manifest" href="manifest.json"><script src="js/dev-config.js"></script><script> (function () { "use strict"; if (window.DEV_CONFIG && window.DEV_CONFIG.DEV_MODE) { console.warn("[Inline Security] üîß DEV_MODE - Pomijam sprawdzenia"); return; } function isMobile() { if (window.DEV_CONFIG && window.DEV_CONFIG.ALLOW_DESKTOP) return true; const ua = navigator.userAgent.toLowerCase(); return /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini|mobile/i.test( ua ); } function isStandalone() { if (window.DEV_CONFIG && window.DEV_CONFIG.SKIP_PWA_CHECK) return true; return ( window.navigator.standalone === true || window.matchMedia("(display-mode: standalone)").matches || window.matchMedia("(display-mode: fullscreen)").matches ); } function checkActivation() { if (window.DEV_CONFIG && window.DEV_CONFIG.SKIP_AUTH_CHECK) return; try { const openRequest = indexedDB.open("obywatel_auth", 1); openRequest.onsuccess = function (event) { const db = event.target.result; const tx = db.transaction("auth_state", "readonly"); const store = tx.objectStore("auth_state"); const getRequest = store.get("auth_state"); getRequest.onsuccess = function () { const authState = getRequest.result; if (!authState || !authState.refreshToken) { console.log( "[Login] Device not activated ‚Üí redirecting to index.html" ); window.location.href = "./index.html"; } }; getRequest.onerror = function () { window.location.href = "./index.html"; }; }; openRequest.onerror = function () { window.location.href = "./index.html"; }; } catch (err) { window.location.href = "./index.html"; } } if (!isMobile()) { window.location.href = "./index.html"; document.documentElement.style.display = "none"; throw new Error("Desktop blocked"); } if (!isStandalone()) { window.location.href = "./index.html"; document.documentElement.style.display = "none"; throw new Error("Not standalone"); } checkActivation(); })(); </script><script src="js/api-client.js" defer="defer"></script><script src="js/pwa-gate.js" defer="defer"></script><link rel="stylesheet" href="css/main.css"><link rel="stylesheet" href="css/common.css"><link rel="stylesheet" href="css/pages/login.css"><link rel="stylesheet" href="css/theme.css"><script src="js/theme.js" defer="defer"></script><script src="js/update-checker.js" defer="defer"></script><script src="js/biometric-auth.js" defer="defer"></script><script src="js/pages/login.js" defer="defer"></script><script src="js/header.js" async></script><script>"serviceWorker"in navigator&&window.addEventListener("load",function(){"file:"!==window.location.protocol?navigator.serviceWorker.register("/sw.js").then(function(e){console.log("[SW] ‚úÖ Zarejestrowany pomy≈õlnie:",e.scope),e.update()}).catch(function(e){console.error("[SW] ‚ùå Rejestracja nie powiod≈Ça siƒô:",e)}):console.warn("[SW] Service Worker nie dzia≈Ça z file:// protoko≈Çem. U≈ºyj lokalnego serwera HTTP.")})</script></head><body><div class="login"><header class="login__header"><div class="login__logo-group"><img src="assets/icons/mobywatel_logo_horizontal.svg" alt="mObywatel" class="login__logo-image app-logo"></div><div class="login__intro"><h1 class="login__title">Dzie≈Ñ dobry!</h1><p class="login__subtitle">Zaloguj siƒô do aplikacji.</p></div></header><main class="login__main"><form id="loginForm" class="login__form"><label class="login__password-label" for="passwordInput">Has≈Ço</label><div class="login__password"><input id="passwordInput" type="password" class="login__password-input" autocomplete="current-password"><button type="button" class="login__eye" aria-label="Poka≈º has≈Ço" onclick="togglePasswordVisibility()"><img src="assets/icons/show_password.svg" alt="Poka≈º has≈Ço"></button></div><div id="passwordError" class="login__error" aria-live="polite" style="display:none;color:#b91c1c;margin:1px 0 -2px 0;font-size:13px"></div><a class="login__forgot" href="#">Nie pamiƒôtasz has≈Ça?</a></form></main><button class="login__biometric-setup" type="button" id="manualBiometricSetup" style="display:none">
  <img src="assets/icons/aa009_fingerprint.svg" alt="Odcisk" class="login__biometric-setup-icon">
  <span>Skonfiguruj odcisk palca</span>
</button><button class="login__submit" type="submit" form="loginForm"> Zaloguj siƒô </button><footer class="login__footer"><div class="login__footerImages"><img src="assets/icons/coi.svg" alt="COI" class="login__footerLogo"><img src="assets/icons/ministerstwo_cyfryzacji.svg" alt="MC" class="login__footerLogo"><img src="assets/icons/coi_common_ui_kpo_logo_group.svg" alt="KPO" class="login__footerLogo login__kpoLogo" data-dark-src="assets/icons/coi_common_ui_kpo_logo_group_dark.svg"></div><p class="login__version">wersja 4.73.2 (5559)</p></footer></div><script src="/images.js" defer></script>
</body></html>
